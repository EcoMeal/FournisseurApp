{% trans_default_domain 'FOSUserBundle' %}

	{% if message is not empty %}
		<div id="success-message" class="alert alert-success alert-dismissable fade in">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
			<p>{{message}}</p>
		</div>
	
	{% endif %}

	<div  id="createUser" class="row col-md-offset-2 col-lg-offset-3 col-md-8 col-lg-6 card">
		<h2 class="card-title">Cr√©er un compte fournisseur</h2>
		{{ form_start(companyForm, {'method': 'post', 'action': path('fos_user_registration_register'), 'attr': {'class': 'fos_user_registration_register'}}) }}
			
			<div class="form-horizontal">
		
				<div class="form-group">
					{{ form_label(companyForm.address, "Adresse", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
					<div class="col-sm-6">
						{{ form_widget(companyForm.address, {'attr': {'class': 'form-control'}}) }}
					</div>
				</div>

				<div class="form-group">
					{{ form_label(companyForm.companyname, "Compagnie", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
					<div class="col-sm-6">
						{{ form_widget(companyForm.companyname, {'attr': {'class': 'form-control'}}) }}
					</div>
				</div>

				<div class="form-group">
					{{ form_label(companyForm.siret, "Siret", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
					<div class="col-sm-6">
						{{ form_widget(companyForm.siret, {'attr': {'class': 'form-control'}}) }}
					</div>
				</div>

				<div class="form-group">
					{{ form_label(companyForm.phone, "Telephone", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
					<div class="col-sm-6">
						{{ form_widget(companyForm.phone, {'attr': {'class': 'form-control'}}) }}
					</div>
				</div>

				<div class="form-group">
					{{ form_label(companyForm.user.email, "Email", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
					<div class="col-sm-6">
						{{ form_widget(companyForm.user.email, {'attr': {'class': 'form-control'}}) }}
					</div>
				</div>

				<div class="form-group">
					{{ form_label(companyForm.user.username, "Nom de Compte", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
					<div class="col-sm-6">
						{{ form_widget(companyForm.user.username, {'attr': {'class': 'form-control'}}) }}
					</div>
				</div>

				<div class="form-group">
					{{ form_label(companyForm.user.plainPassword.first, "Mot de passe", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
					<div class="col-sm-6">
						{{ form_widget(companyForm.user.plainPassword.first, {'attr': {'class': 'form-control'}}) }}
					</div>
				</div>

				<div class="form-group">
					{{ form_label(companyForm.user.plainPassword.second, "Comfirmation mot de passe", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}
					<div class="col-sm-6">
						{{ form_widget(companyForm.user.plainPassword.	second, {'attr': {'class': 'form-control'}}) }}
					</div>
				</div>

				
				<div class="form-group"> 
					<button type="submit" class="btn btn-default col-xs-offset-8">Valider</button>
				</div>
		
			</div>
		
		{{ form_end(companyForm) }}
	
	</div>

	<script>
		$('#userbundle_company_siret').blur(function() {
			let siret = $('#userbundle_company_siret').val();
			if((siret+"").length!=14){
				$('#userbundle_company_siret').parent().parent().addClass('has-error')
			} else {
				$('#userbundle_company_siret').parent().parent().removeClass('has-error')
			}
		});

		$('#userbundle_company_phone').blur(function() {
			let siret = $('#userbundle_company_phone').val();
			if((siret+"").length!=10){
				$('#userbundle_company_phone').parent().parent().addClass('has-error')
			} else {
				$('#userbundle_company_phone').parent().parent().removeClass('has-error')
			}
		});

		$('#userbundle_company_user_email').blur(function() {
			let siret = $('#userbundle_company_user_email').val();
			if((siret+"").length!=10){
				$('#userbundle_company_user_email').parent().parent().addClass('has-error')
			} else {
				$('#userbundle_company_user_email').parent().parent().removeClass('has-error')
			}
		});
	</script>